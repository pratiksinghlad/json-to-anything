import{n as e}from"./rolldown-runtime-BM52pwkw.js";import{D as t,E as n,F as r,G as i,I as a,L as o,M as s,N as c,O as l,P as u,S as d,T as f,U as p,_ as m,b as h,c as g,f as _,g as v,h as y,i as b,j as x,l as S,m as C,n as w,o as T,p as E,t as D,v as O,x as k,y as A,z as j}from"./mui-vendor-CE9s5qa2.js";import{c as M,s as N,t as P}from"./react-vendor-D6TQlta-.js";import{t as F}from"./prism-vendor-qnlMYUMC.js";var I=e(i()),L=e(P()),R=e(F()),z=e(p()),B=e=>R.default.languages.json?R.default.highlight(e,R.default.languages.json,`json`):e;function V({value:e,onChange:t,error:n}){let{t:i}=M(),o=e.split(`
`).length,s=Array.from({length:o},(e,t)=>t+1).join(`
`),l=(0,I.useRef)(null),u=(0,I.useRef)(null),d=(0,I.useRef)(null);(0,I.useEffect)(()=>{(async()=>{if(!R.default.languages.json)try{await N(()=>import(`./prism-json-C7LrprNE.js`),[]),R.default.languages.json||console.error(`Prism JSON language was imported, but not registered.`)}catch(e){console.error(`Failed to load Prism JSON language:`,e)}})()},[]);let[f,p]=(0,I.useState)(21),[m,h]=(0,I.useState)(32),g=o*f+m;return(0,I.useEffect)(()=>{if(typeof window>`u`)return;let e=()=>{let e=document.getElementById(`json-editor`);if(!e)return;let t=getComputedStyle(e),n=parseFloat(t.lineHeight||``),r=Number.isFinite(n)&&n>0?n:NaN;if(Number.isNaN(r)){let e=parseFloat(t.fontSize||``);r=Number.isFinite(e)&&e>0?e*1.4:21}let i=parseFloat(t.paddingTop||``)||16,a=parseFloat(t.paddingBottom||``)||16;p(r),h(i+a)};e();let t=window.setTimeout(e,50);return()=>window.clearTimeout(t)},[e]),(0,I.useEffect)(()=>{let e=d.current,t=u.current;if(!e||!t)return;let n=()=>{t.scrollTop=e.scrollTop};return e.addEventListener(`scroll`,n),()=>e.removeEventListener(`scroll`,n)},[]),(0,z.jsxs)(c,{children:[(0,z.jsx)(r,{variant:`h6`,gutterBottom:!0,sx:{color:`#000000`,fontWeight:500},children:i(`editor.title`)}),(0,z.jsxs)(j,{elevation:0,sx:{border:n?`2px solid #d32f2f`:`1px solid #d0d0d0`,borderRadius:`8px`,overflow:`hidden`,position:`relative`,height:{xs:`40vh`,sm:`45vh`,md:`50vh`},maxHeight:{xs:`40vh`,sm:`45vh`,md:`50vh`},minHeight:`250px`,display:`flex`,backgroundColor:`#ffffff`},children:[(0,z.jsx)(c,{ref:u,sx:{width:`50px`,backgroundColor:`#f8f8f8`,borderRight:`1px solid #e0e0e0`,overflow:`auto`,position:`relative`,"&::-webkit-scrollbar":{display:`none`},scrollbarWidth:`none`},children:(0,z.jsx)(c,{ref:l,sx:{padding:`16px 8px`,textAlign:`right`,color:`#757575`,fontSize:14,fontFamily:`"Fira code", "Fira Mono", monospace`,userSelect:`none`,lineHeight:`${f}px`,pointerEvents:`none`,whiteSpace:`pre`,height:`${g}px`},children:s})}),(0,z.jsx)(c,{ref:d,sx:{flex:1,overflow:`auto`,position:`relative`},children:(0,z.jsx)(L.default,{value:e,onValueChange:t,highlight:B,padding:16,style:{fontFamily:`"Fira code", "Fira Mono", monospace`,fontSize:14,minHeight:`${g}px`,backgroundColor:`#ffffff`,lineHeight:`${f}px`,width:`100%`},textareaId:`json-editor`,"aria-label":i(`aria.jsonEditor`)})})]}),n&&(0,z.jsx)(a,{severity:`error`,sx:{mt:1},children:n})]})}function H({separator:e,includeHeader:r,trimEmptyColumns:i,pascalCaseHeaders:a,onSeparatorChange:o,onIncludeHeaderChange:s,onTrimEmptyColumnsChange:c,onPascalCaseHeadersChange:u}){let{t:f}=M(),p=e=>{o(e.target.value)},m=e=>{switch(e){case`,`:return f(`options.separatorComma`);case`;`:return f(`options.separatorSemicolon`);case`	`:return f(`options.separatorTab`);default:return e}};return(0,z.jsx)(j,{elevation:0,sx:{p:2.5,mb:2,border:`2px solid #e0e0e0`,borderRadius:`8px`,backgroundColor:`#ffffff`},children:(0,z.jsxs)(A,{direction:{xs:`column`,sm:`row`},spacing:3,alignItems:`center`,children:[(0,z.jsxs)(l,{size:`small`,sx:{minWidth:150,"& .MuiOutlinedInput-root":{backgroundColor:`#ffffff`,"& fieldset":{borderColor:`#d0d0d0`},"&:hover fieldset":{borderColor:`#1976d2`},"&.Mui-focused fieldset":{borderColor:`#1976d2`}}},children:[(0,z.jsx)(n,{id:`separator-label`,children:f(`options.separator`)}),(0,z.jsxs)(k,{labelId:`separator-label`,id:`separator-select`,value:e,label:f(`options.separator`),onChange:p,"aria-label":f(`aria.separator`),children:[(0,z.jsx)(d,{value:`,`,children:m(`,`)}),(0,z.jsx)(d,{value:`;`,children:m(`;`)}),(0,z.jsx)(d,{value:`\\t`,children:m(`	`)})]})]}),(0,z.jsx)(t,{control:(0,z.jsx)(O,{checked:r,onChange:e=>s(e.target.checked),"aria-label":f(`options.includeHeader`)}),label:f(`options.includeHeader`),sx:{"& .MuiFormControlLabel-label":{color:`#000000`,fontSize:`0.875rem`}}}),(0,z.jsx)(t,{control:(0,z.jsx)(O,{checked:i,onChange:e=>c(e.target.checked),"aria-label":f(`options.trimEmptyColumns`)}),label:f(`options.trimEmptyColumns`),sx:{"& .MuiFormControlLabel-label":{color:`#000000`,fontSize:`0.875rem`}}}),(0,z.jsx)(t,{control:(0,z.jsx)(O,{checked:a,onChange:e=>u(e.target.checked),"aria-label":f(`options.pascalCaseHeaders`)}),label:f(`options.pascalCaseHeaders`),sx:{"& .MuiFormControlLabel-label":{color:`#000000`,fontSize:`0.875rem`}}})]})})}function U(e,t=``,n={}){for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let i=e[r],a=t?`${t}.${r}`:r;i==null?n[a]=i:Array.isArray(i)?n[a]=JSON.stringify(i):typeof i==`object`&&i.constructor===Object?U(i,a,n):n[a]=i}return n}function W(e){let t=new Set;for(let n of e){let e=U(n);for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.add(n)}return Array.from(t).sort()}function G(e){return e.split(/[._-\s]+/).filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(``)}function K(e,t){if(e==null)return``;let n=String(e);return n.includes(t)||n.includes(`"`)||n.includes(`
`)||n.includes(`\r`)?`"${n.replace(/"/g,`""`)}"`:n}function q(e,t){if(e.length===0)return``;let{separator:n,includeHeader:r,trimEmptyColumns:i,pascalCaseHeaders:a}=t,o=W(e);i&&(o=o.filter(t=>e.some(e=>{let n=U(e)[t];return n!=null&&n!==``})));let s=[];if(r){let e=o.map(e=>{let t=a?G(e):e;return K(t,n)}).join(n);s.push(e)}for(let t of e){let e=U(t),r=o.map(t=>K(e[t],n)).join(n);s.push(r)}return s.join(`
`)}function J({data:e,maxRows:t=50,pascalCaseHeaders:n=!1}){let{t:i}=M();if(e.length===0)return null;let a=W(e),o=e.slice(0,t),s=e.length>t;return(0,z.jsx)(u,{in:!0,timeout:500,children:(0,z.jsxs)(c,{children:[(0,z.jsxs)(r,{variant:`h6`,gutterBottom:!0,sx:{color:`#000000`,fontWeight:500},children:[i(`preview.title`),` `,s&&i(`preview.showing`,{shown:t,total:e.length})]}),(0,z.jsx)(C,{component:j,elevation:0,sx:{maxHeight:500,border:`1px solid #d0d0d0`,borderRadius:`8px`,backgroundColor:`#ffffff`},children:(0,z.jsxs)(m,{stickyHeader:!0,size:`small`,"aria-label":i(`preview.title`)+` table`,children:[(0,z.jsx)(E,{children:(0,z.jsx)(_,{children:a.map(e=>{let t=n?G(e):e;return(0,z.jsx)(y,{sx:{fontWeight:600,backgroundColor:`#f5f5f5`,whiteSpace:`nowrap`,borderRight:`1px solid #e0e0e0`,borderBottom:`2px solid #d0d0d0`,color:`#000000`,fontSize:`0.875rem`,"&:last-child":{borderRight:`none`}},children:t},e)})})}),(0,z.jsx)(v,{children:o.map((e,t)=>{let n=U(e);return(0,z.jsx)(_,{hover:!0,sx:{"&:hover":{backgroundColor:`#f9f9f9`}},children:a.map(e=>{let t=n[e],r=t==null?``:String(t);return(0,z.jsx)(y,{sx:{maxWidth:300,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`,borderRight:`1px solid #e0e0e0`,borderBottom:`1px solid #e0e0e0`,color:`#000000`,fontSize:`0.8125rem`,"&:last-child":{borderRight:`none`}},children:r},e)})},t)})})]})})]})})}const Y={color:`rgba(0,0,0,0.6)`,transition:`color 0.15s ease-in-out, background-color 0.15s ease-in-out`,"&:hover":{color:`primary.main`,backgroundColor:`transparent`}},X={backgroundColor:`primary.main`,color:`#ffffff`,"&:hover":{backgroundColor:`primary.dark`},"&:disabled":{backgroundColor:`#e0e0e0`,color:`rgba(0, 0, 0, 0.26)`}},Z={borderColor:`primary.main`,color:`primary.main`,"&:hover":{borderColor:`primary.dark`,backgroundColor:`rgba(25, 118, 210, 0.04)`},"&:disabled":{borderColor:`#e0e0e0`,color:`rgba(0, 0, 0, 0.26)`}},Q={color:`primary.main`,"&:hover":{backgroundColor:`rgba(25, 118, 210, 0.04)`},"&:disabled":{color:`rgba(0, 0, 0, 0.26)`}};function $({csvData:e,jsonData:t,disabled:n=!1}){let{t:r}=M(),[i,o]=(0,I.useState)(!1),[c,l]=(0,I.useState)(``),u=e=>{l(e),o(!0)},d=(e,t,n)=>{let r=new Blob([e],{type:n}),i=URL.createObjectURL(r),a=document.createElement(`a`);a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)},f=()=>{let e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,`0`),r=String(e.getDate()).padStart(2,`0`),i=String(e.getHours()).padStart(2,`0`),a=String(e.getMinutes()).padStart(2,`0`),o=String(e.getSeconds()).padStart(2,`0`);return`${t}${n}${r}-${i}${a}${o}`},p=()=>{let t=`data-${f()}.csv`;d(e,t,`text/csv;charset=utf-8;`),u(r(`snackbar.csvDownloaded`))},m=()=>{let e=`data-${f()}.json`;d(t,e,`application/json`),u(r(`snackbar.jsonDownloaded`))},_=async()=>{try{await navigator.clipboard.writeText(e),u(r(`snackbar.csvCopied`))}catch{u(r(`snackbar.copyFailed`))}},v=()=>{let t=new Blob([e],{type:`text/csv`}),n=URL.createObjectURL(t);window.open(n,`_blank`),setTimeout(()=>{URL.revokeObjectURL(n)},100)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(A,{direction:{xs:`column`,sm:`row`},spacing:2,sx:{mb:3},children:[(0,z.jsx)(s,{variant:`contained`,startIcon:(0,z.jsx)(g,{}),onClick:p,disabled:n,"aria-label":r(`aria.downloadCsv`),sx:X,children:r(`buttons.downloadCsv`)}),(0,z.jsx)(s,{variant:`outlined`,startIcon:(0,z.jsx)(g,{}),onClick:m,disabled:n,"aria-label":r(`aria.downloadJson`),sx:Z,children:r(`buttons.downloadJson`)}),(0,z.jsx)(s,{variant:`outlined`,startIcon:(0,z.jsx)(S,{}),onClick:_,disabled:n,"aria-label":r(`aria.copyCsv`),sx:Z,children:r(`buttons.copyCsv`)}),(0,z.jsx)(s,{variant:`text`,startIcon:(0,z.jsx)(w,{}),onClick:v,disabled:n,"aria-label":r(`aria.showRawData`),sx:Q,children:r(`buttons.showRawData`)})]}),(0,z.jsx)(h,{open:i,autoHideDuration:3e3,onClose:()=>o(!1),anchorOrigin:{vertical:`bottom`,horizontal:`center`},children:(0,z.jsx)(a,{onClose:()=>o(!1),severity:`success`,variant:`filled`,children:c})})]})}function ee(){let e=`pratiksinghlad`,{t}=M();return(0,z.jsx)(c,{component:`footer`,sx:{mt:`auto`,py:3,px:2,backgroundColor:`#f5f5f5`,borderTop:`3px solid #e0e0e0`},children:(0,z.jsx)(x,{maxWidth:`lg`,children:(0,z.jsxs)(A,{spacing:2,alignItems:`center`,children:[(0,z.jsxs)(r,{variant:`body2`,color:`text.secondary`,align:`center`,children:[(0,z.jsx)(`strong`,{children:t(`footer.privacyTitle`)}),` `,t(`footer.privacyText`),` `,(0,z.jsx)(f,{href:`https://github.com/${e}/json-to-anything`,target:`_blank`,rel:`noopener noreferrer`,children:t(`footer.github`)}),`.`]}),(0,z.jsxs)(A,{direction:`row`,spacing:1,children:[(0,z.jsx)(o,{href:`https://github.com/${e}`,target:`_blank`,rel:`noopener noreferrer`,"aria-label":t(`footer.viewSource`),size:`small`,sx:Y,children:(0,z.jsx)(T,{sx:{color:`inherit`}})}),(0,z.jsx)(o,{href:`https://x.com/${e}`,target:`_blank`,rel:`noopener noreferrer`,"aria-label":t(`footer.followTwitter`),size:`small`,sx:Y,children:(0,z.jsx)(D,{sx:{color:`inherit`}})}),(0,z.jsx)(o,{href:`https://www.linkedin.com/in/${e}/`,target:`_blank`,rel:`noopener noreferrer`,"aria-label":t(`footer.connectLinkedIn`),size:`small`,sx:Y,children:(0,z.jsx)(b,{sx:{color:`inherit`}})})]}),(0,z.jsx)(r,{variant:`body2`,color:`text.secondary`,align:`center`,children:t(`footer.copyright`,{year:new Date().getFullYear()})})]})})})}function te(e){try{return e.trim()?{success:!0,data:JSON.parse(e)}:{success:!1,error:`Input is empty`}}catch(e){return{success:!1,error:e instanceof Error?e.message:`Invalid JSON`}}}function ne(e){if(Array.isArray(e))return e.length===0?{success:!1,error:`Array is empty`}:e.every(e=>typeof e==`object`&&!!e&&!Array.isArray(e))?{success:!0,data:e}:{success:!1,error:`Array must contain only objects`};if(typeof e==`object`&&e&&!Array.isArray(e)){let t=e;return`data`in t&&Array.isArray(t.data)?t.data.length===0?{success:!1,error:`Data array is empty`}:t.data.every(e=>typeof e==`object`&&!!e&&!Array.isArray(e))?{success:!0,data:t.data}:{success:!1,error:`Data array must contain only objects`}:{success:!0,data:[t]}}return{success:!1,error:`Input must be an array of objects, a single object, or an object with a "data" array property`}}var re=`[
  {
    "id": 1,
    "name": "Pratik",
    "email": "pratik@example.com",
    "profile": {
      "role": "engineer",
      "joined": "2017-04-12T08:00:00Z"
    },
    "tags": ["fullstack", "react", "dotnet", "azure", "devops", "ci/cd", "cloud"]
  },
  {
    "id": 2,
    "name": "Bob",
    "email": "bob@example.com",
    "profile": {
      "role": "designer"
    },
    "tags": []
  }
]`,ie=()=>{let{t:e}=M(),[t,n]=(0,I.useState)(re),[i,a]=(0,I.useState)(),[o,s]=(0,I.useState)([]),[l,u]=(0,I.useState)(``),[d,f]=(0,I.useState)(`,`),[p,m]=(0,I.useState)(!0),[h,g]=(0,I.useState)(!1),[_,v]=(0,I.useState)(!1);return(0,I.useEffect)(()=>{let n=te(t);if(!n.success){n.error===`Input is empty`?a(e(`errors.emptyInput`)):a(e(`errors.invalidJson`)),s([]),u(``);return}let r=ne(n.data);if(!r.success){let t={"Array is empty":e(`errors.arrayEmpty`),"Array must contain only objects":e(`errors.arrayOnlyObjects`),"Data array is empty":e(`errors.dataArrayEmpty`),"Data array must contain only objects":e(`errors.dataArrayOnlyObjects`)};a(t[r.error||``]||r.error||e(`errors.invalidInputType`)),s([]),u(``);return}a(void 0),s(r.data||[]);let i={separator:d,includeHeader:p,trimEmptyColumns:h,pascalCaseHeaders:_},o=q(r.data||[],i);u(o)},[t,d,p,h,_,e]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(x,{maxWidth:`lg`,sx:{py:4,flex:1,backgroundColor:`#ffffff`},children:[(0,z.jsx)(r,{variant:`h3`,component:`h1`,gutterBottom:!0,align:`center`,sx:{color:`#000000`,fontWeight:600},children:e(`pages.jsonToCsv.title`)}),(0,z.jsx)(r,{variant:`subtitle1`,gutterBottom:!0,align:`center`,sx:{mb:4,color:`rgba(0, 0, 0, 0.6)`},children:e(`pages.jsonToCsv.subtitle`)}),(0,z.jsx)(c,{sx:{mb:4},children:(0,z.jsx)(V,{value:t,onChange:n,error:i})}),(0,z.jsx)(H,{separator:d,includeHeader:p,trimEmptyColumns:h,pascalCaseHeaders:_,onSeparatorChange:f,onIncludeHeaderChange:m,onTrimEmptyColumnsChange:g,onPascalCaseHeadersChange:v}),o.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)($,{csvData:l,jsonData:t,disabled:o.length===0}),(0,z.jsx)(J,{data:o,pascalCaseHeaders:_})]})]}),(0,z.jsx)(ee,{})]})};export{ie as default};